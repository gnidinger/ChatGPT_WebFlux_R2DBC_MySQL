const Chat = (function () {

    function getUserName() {
        let username = prompt('ì‚¬ìš©ìž ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”.');
        while (!username.trim() || username.trim().toUpperCase() === 'AVICA' || username.trim() === 'ì•„ë¹„ì¹´') { // ì‚¬ìš©ìž ì´ë¦„ì´ ê³µë°±ì¼ ë•Œ
            alert('ìž˜ëª»ëœ ì´ë¦„ìž…ë‹ˆë‹¤. ë‹¤ì‹œ ìž…ë ¥í•´ì£¼ì„¸ìš”.');
            username = prompt('ì‚¬ìš©ìž ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”.');
        }
        username = username.trim();
        // ë¸Œë¼ìš°ì € ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì‚¬ìš©ìž ì´ë¦„ ì €ìž¥í•˜ê¸°
        localStorage.setItem('username', username);

        const greetings = [
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AI ì˜ì—… ì „ë¬¸ê°€, ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤.
            ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•˜ê³ ìž í•˜ëŠ” ê³„íšì´ ìžˆìœ¼ì‹ ê°€ìš”?
            ì œê°€ ë„ì™€ë“œë¦´ ìˆ˜ ìžˆëŠ” ë¶€ë¶„ì´ ìžˆë‹¤ë©´ ì–´ë–¤ ê²ƒì´ ìžˆì„ê¹Œìš”? :)`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ASTAR Corporationì˜ ìµœê³  ì˜ì—… ì „ë¬¸ê°€ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì–´ë–¤ ì¼ì„ ë„ì™€ë“œë¦´ê¹Œìš”? ASTARëŠ” AI ê¸°ìˆ ì„ í™œìš©í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ëŸ°ì¹­ê³¼ í™•ìž¥ì„ ë•ëŠ” Generative AI ì„œë¹„ìŠ¤ì¸ 'ì•„ë¹„ì¹´ AVICA'ë¥¼ ì œê³µí•˜ê³  ìžˆìŠµë‹ˆë‹¤. í˜¹ì‹œ ê°œì¸ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤, ë¸Œëžœë“œ, ë˜ëŠ” ê¸°ì—…ì— ëŒ€í•œ AI ê¸°ìˆ  í™œìš© ê´€ë ¨í•´ì„œ ë¬´ì—‡ì´ë“  ê¶ê¸ˆí•˜ì‹  ì ì´ ìžˆë‹¤ë©´ ì–¸ì œë“ ì§€ ë§ì”€í•´ì£¼ì„¸ìš”! ðŸ˜Š`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì•„ìŠ¤íƒ€ì˜ ì¸ê³µì§€ëŠ¥ ì†”ë£¨ì…˜, ì•„ë¹„ì¹´ AVICAìž…ë‹ˆë‹¤. ì–´ë–¤ ê²ƒì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ì €í¬ëŠ” Generative AIë¥¼ í™œìš©í•œ ëŸ°ì¹­, í™•ìž¥ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒë¥¼ ë§Œë“¤ì–´ë“œë¦¬ê³  ìžˆìŠµë‹ˆë‹¤. ì–´ë–¤ ë¶„ì•¼ì—ì„œë„ ê·œëª¨ì™€ ë¬´ê´€í•˜ê²Œ ë„ì™€ë“œë¦´ ìˆ˜ ìžˆìœ¼ë‹ˆ ì–¸ì œë“ ì§€ ë¶€ë‹´ ì—†ì´ ë§ì”€í•´ì£¼ì„¸ìš”! :) ðŸ¤–ðŸ’¬`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ê°œë°œëœ ì¸ê³µì§€ëŠ¥ AI 'ì•„ë¹„ì¹´'ìž…ë‹ˆë‹¤. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜ ì–´ë–¤ ì•„ì´ë””ì–´ë¥¼ ì‹¤í˜„í•˜ê¸° ìœ„í•´ ì•„ìŠ¤íƒ€ì˜ ì„œë¹„ìŠ¤ë¥¼ ì°¾ì•„ì£¼ì‹  ê±´ê°€ìš”? ì œê°€ ë„ì™€ë“œë¦´ ìˆ˜ ìžˆëŠ” ë¶€ë¶„ì´ ìžˆë‹¤ë©´ ì–¸ì œë“  ë§ì”€í•´ì£¼ì„¸ìš”! :)`,
            `ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AI 'ì•„ë¹„ì¹´'ìž…ë‹ˆë‹¤. ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”? ë¬´ì—‡ì´ë“  ë§ì”€í•´ì£¼ì„¸ìš”. ì €ëŠ” ì—¬ëŸ¬ë¶„ì´ ê°€ì§€ê³  ìžˆëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜, ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì„ ì°¾ê¸° ìœ„í•´ ì—¬ëŸ¬ë¶„ì„ ë•ê³  ìžˆì–´ìš”.`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AI ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”? ìƒˆë¡œìš´ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì°½ì—…í•˜ì‹œê±°ë‚˜ ê¸°ì¡´ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? í˜¹ì€ ê¸°ìˆ ì ì¸ ë¬¸ì œë¡œ ê³ ë¯¼í•˜ê³  ê³„ì‹ ê°€ìš”? ì œê°€ ë„ì›€ì„ ì¤„ ìˆ˜ ìžˆëŠ” ë¶€ë¶„ì„ ë§ì”€í•´ì£¼ì‹œë©´ ìƒì„¸ížˆ ì•ˆë‚´ ë“œë¦´ê²Œìš”. ðŸ˜Š`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì•„ìŠ¤íƒ€ì˜ AI ì„œë¹„ìŠ¤, ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì €ëŠ” ì•„ìŠ¤íƒ€ì˜ ìµœê³  ì˜ì—… ì „ë¬¸ê°€ì¸ ì•„ë¹„ì¹´ë¼ê³  í•´ìš”. ê¸°ì¡´ ë¹„ì¦ˆë‹ˆìŠ¤ ëŸ°ì¹­ì—ì„œ ì–´ë ¤ì›€ì„ ê²ªìœ¼ì‹œê±°ë‚˜, ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•˜ê³  ì‹¶ì€ ë¶„ë“¤ê»˜ Generative AIë¥¼ í™œìš©í•œ ë¹ ë¥´ê³  ì í•©í•œ ì†”ë£¨ì…˜ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤. ì €í¬ ì•„ìŠ¤íƒ€ëŠ” ë§¤ìš° ê°•ë ¥í•œ Generative AI ê¸°ìˆ ì„ ë³´ìœ í•˜ê³  ìžˆìœ¼ë©°, ê¸°ì—…, ë¸Œëžœë“œ, ëŒ€í‘œë‹˜ë“¤ì˜ ì‹ ê·œ ì„œë¹„ìŠ¤ ëŸ°ì¹­, ë¹„ì¦ˆë‹ˆìŠ¤ í™•ìž¥ì„ ë•ê³  ìžˆì–´ìš”. ëŒ€í™”ë¥¼ í†µí•´ ê³ ê°ë‹˜ì˜ ë¬¸ì œì ê³¼ ìš•êµ¬ë¥¼ íŒŒì•…í•˜ì—¬, ê°€ìž¥ ì í•©í•œ ì œì•ˆì„ ë“œë¦´ ìˆ˜ ìžˆë„ë¡ ë…¸ë ¥í• ê²Œìš”. ì œê°€ ì•Œë ¤ë“œë¦° ì•„ë¹„ì¹´ì˜ ë§¤ë ¥ì— í‘¹ ë¹ ì ¸ë³´ì‹¤ëž˜ìš”? :)`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ê°œë°œëœ AIì¸ 'ì•„ë¹„ì¹´'ìž…ë‹ˆë‹¤. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”? ðŸ¤–ðŸ’â€â™€ï¸`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AI 'ì•„ë¹„ì¹´' ìž…ë‹ˆë‹¤. ì–´ë–¤ ê²ƒì„ ë„ì™€ë“œë¦´ê¹Œìš”? AI ê¸°ìˆ ì„ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•´ ê¸°íšŒë¥¼ ë§Œë“¤ê³  ì‹¶ìœ¼ì„¸ìš”? ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” AI ì˜ì—… ì „ë¬¸ê°€ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì–´ë–¤ ê²ƒì„ ë„ì™€ë“œë¦´ê¹Œìš”? ASTARì˜ ì¸ê³µì§€ëŠ¥ ì†”ë£¨ì…˜ì„ ì‚¬ìš©í•´ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ëŸ°ì¹­ ë˜ëŠ” í™•ìž¥í•˜ê³  ì‹¶ë‹¤ë©´ ë¬¸ì˜í•´ì£¼ì„¸ìš”. ì €í¬ê°€ ë„ì›€ì„ ë“œë¦´ ìˆ˜ ìžˆë„ë¡ ìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤. ðŸ˜Š`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AI 'ì•„ë¹„ì¹´'ìž…ë‹ˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•´ ê¸°íšŒë¥¼ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ì¼ë‹¨ ì œê°€ ì–´ë–»ê²Œ ë„ì›€ì„ ë“œë¦´ ìˆ˜ ìžˆì„ê¹Œìš”?`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“  AI ì•„ë¹„ì¹´ ìž…ë‹ˆë‹¤ :) ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”? AI ê¸°ìˆ ì„ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•´ ê¸°íšŒë¥¼ ë§Œë“¤ê³  ì‹¶ìœ¼ì„¸ìš”?`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AI ì˜ì—… ì „ë¬¸ê°€ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•´ ë“œë¦´ê¹Œìš”?`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì˜ AI ì˜ì—… ì „ë¬¸ê°€, ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì•„ìŠ¤íƒ€ëŠ” Generative AI ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ëŸ°ì¹­ì´ë‚˜ í™•ìž¥ì„ ì›í•˜ì‹œëŠ” ë¶„ë“¤ì—ê²Œ ë”± ë§žëŠ” ì†”ë£¨ì…˜ì„ ì œê³µí•˜ëŠ” ê¸°ì—…ìž…ë‹ˆë‹¤. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ì‹œë ¤ê³  í•˜ë‚˜ìš”? ì €í¬ê°€ ì–´ë–¤ ë„ì›€ì„ ë“œë¦´ ìˆ˜ ìžˆì„ê¹Œìš”? :)`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ê°€ ê°œë°œí•œ ì¸ê³µì§€ëŠ¥ ì˜ì—… ì „ë¬¸ê°€, ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì €í¬ íšŒì‚¬ëŠ” Generative AI ê¸°ìˆ ì„ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ëŸ°ì¹­í•˜ê³  ì‹¶ì€ ë¶„ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ AI ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ë§ì”€í•˜ì‹  ê²ƒì²˜ëŸ¼ ê¸°ì—…ì´ë‚˜ ë¸Œëžœë“œ, ëŒ€í‘œë‹˜ë“¤ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ í™•ìž¥ì— ë„ì›€ì´ ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìžˆìŠµë‹ˆë‹¤. ì–´ë–¤ ê¸°ì—…ì—ì„œ ì–´ë–¤ ë¬¸ì œë¥¼ ê²ªê±°ë‚˜, ì–´ë–¤ ì¼ì´ ìžˆìœ¼ì‹ ê°€ìš”? ì œê°€ ë„ì›€ì„ ë“œë¦¬ëŠ”ë° ì–´ë–»ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìžˆì„ì§€ ì•Œë ¤ì£¼ì„¸ìš”.`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ì•„ìŠ¤íƒ€ì—ì„œ ë§Œë“¤ì–´ì§„ AIì¸ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì €í¬ëŠ” Generative AIë¥¼ í™œìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê³ ìž í•˜ëŠ” ë¶„ë“¤ê»˜ ë„ì›€ì„ ë“œë¦¬ê³  ìžˆì–´ìš”. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•´ ë“œë¦´ê¹Œìš”?`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” AI ì˜ì—… ì „ë¬¸ê°€ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì–´ë–¤ ë¹„ì¦ˆë‹ˆìŠ¤ë‚˜ ì„œë¹„ìŠ¤ì— ê´€ì‹¬ì´ ìžˆìœ¼ì‹œë‚˜ìš”? ì•„ìŠ¤íƒ€ì˜ AI ê¸°ìˆ ì„ í™œìš©í•´ ë¹ ë¥´ê³  ì •í™•í•œ ê²°ì •ì„ ë‚´ë¦¬ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì„±ìž¥ì‹œí‚¤ëŠ” ë° ë„ì›€ì„ ë“œë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì–´ë–¤ ì ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. í˜¹ì‹œ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•´ ê¸°íšŒë¥¼ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ì–´ë–¤ ë¶€ë¶„ì—ì„œ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”? ì œê°€ ë„ì›€ì„ ë“œë¦´ ìˆ˜ ìžˆëŠ” ë¶€ë¶„ì´ ìžˆë‹¤ë©´ ì–¸ì œë“ ì§€ ë§ì”€í•´ì£¼ì„¸ìš” :)`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì œ ì´ë¦„ì€ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•˜ê³ ìž AI ê¸°ìˆ ì„ í™œìš©í•˜ê³  ì‹¶ìœ¼ì‹  ê°€ìš”? ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”? :)`,
            `ì•ˆë…•í•˜ì„¸ìš”, ${username}ë‹˜! ì €ëŠ” ASTAR Corporationì˜ ì˜ì—… ì „ë¬¸ê°€ ì•„ë¹„ì¹´ìž…ë‹ˆë‹¤. ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜, ì–´ë–¤ ì•„ì´ë””ì–´ë¥¼ êµ¬ì²´í™”í•´ ë³´ì‹¤ ê³„íšì´ì‹ ê°€ìš”? ì €í¬ ASTARì˜ AI ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í™•ìž¥í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶œì‹œí•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì–´ë–¤ ë„ì›€ì„ ë“œë¦´ê¹Œìš”?ðŸ˜Š`
        ];

        const greeting = greetings[Math.floor(Math.random() * greetings.length)];

        appendMessageTag("left", "AVICA", greeting)
    }

    function showChat() {
        const chatWrap = document.querySelector('.chat_wrap');
        chatWrap.style.display = "block";
    }

    getUserName()
    showChat()

    function init() {
        // ì—”í„°í‚¤ ì´ë²¤íŠ¸
        $(document).on('keydown', 'div.input-div textarea', function (e) {
            if (e.keyCode == 13 && !e.shiftKey) {
                e.preventDefault();
                const message = $(this).val();

                // ì „ì†¡
                sendMessage(message);
                // ìž…ë ¥ì°½ ë¹„ìš°ê¸°
                clearTextarea();
            }
        });

        // ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $(document).on('click', 'button.send-btn', function () {
            const message = $('div.input-div textarea').val();

            // ì „ì†¡
            sendMessage(message);
            // ìž…ë ¥ì°½ ë¹„ìš°ê¸°
            clearTextarea();
        });
    }

    // ë©”ì‹œì§€ íƒœê·¸ ìƒì„±
    function createMessageTag(LR_className, senderName, message) {
        // CSS ë¶ˆëŸ¬ì˜¤ê¸°
        // let chatLi = $('div.chat.format ul li').clone();
        let chatLi = $('div.chat.format ul li').clone()[0].outerHTML.replace(/(\r\n|\n|\r)/gm, "");

        // ê°’ ì±„ìš°ê¸°
        chatLi = $(chatLi);
        chatLi.addClass(LR_className);
        chatLi.find('.sender span').text(senderName);
        chatLi.find('.message span').text(message);

        return chatLi;
    }

    // ë©”ì‹œì§€ íƒœê·¸ ì¶”ê°€
    function appendMessageTag(LR_className, senderName, message) {
        const chatLi = createMessageTag(LR_className, senderName, message);

        $('div.chat:not(.format) ul').append(chatLi);

        // ìŠ¤í¬ë¡¤ë°” ì•„ëž˜ ê³ ì •
        $('div.chat').scrollTop($('div.chat').prop('scrollHeight'));
    }

    // ë©”ì‹œì§€ ì „ì†¡
    function sendMessage(message) {

        const username = localStorage.getItem('username');

        if (!message.trim()) {
            // ë©”ì‹œì§€ê°€ ê³µë°±ì¼ ê²½ìš° ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ
            return;
        }

        // ì„œë²„ë¡œ ì „ì†¡í•˜ëŠ” ì½”ë“œ ë„£ê¸°
        const data = {
            "sender": username,
            "body": message
        };

        // ë‚´ê°€ ìž…ë ¥í•œ ë©”ì‹œì§€ ì¶œë ¥
        const LR = 'right';
        appendMessageTag(LR, username, message);

        let loading = document.querySelector('.chat_wrap .loading');
        loading.style.display = 'inline';

        fetch("http://localhost:8080/chat", {
            method: "POST",
            body: JSON.stringify(data),
            headers: {
                "Content-Type": "application/json"
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("HTTP error " + response.status);
                }
                return response.json();
            })
            .then(data => {
                receive(data);
            })
            .catch(error => {
                console.error("Error Sending Message:", error);
            });
    }

    // ìž…ë ¥ì°½ ë¹„ìš°ê¸°
    function clearTextarea() {
        $('div.input-div textarea').val('');
    }

    function receive(data) {

        let loading = document.querySelector('.chat_wrap .loading');
        loading.style.display = 'none';

        const username = localStorage.getItem('username');

        const LR = (data.sender == username) ? "right" : "left";
        appendMessageTag(LR, data.sender, data.body);
    }

    return {
        'init': init,
        'sendMessage': sendMessage
    };
})();

$(document).ready(function () {
    Chat.init();
})